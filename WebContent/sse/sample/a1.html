<!DOCTYPE htlm>
<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=EUC-KR">
<title>Server-Sent Events Sample</title>
<script type="text/javascript">
function init() {
	// message.jsp 로부터 데이터를 읽어들임
	//alert(1);
	var source = new EventSource("/html5/sse");
	//alert(2);
	//메시지 이벤트 처리
	source.addEventListener("message", function(event) {
		alert("Receive OK!!!" );
		
		// 서버로부터 푸시된 데이터를 줄 바꿈 코드로 분할
		var data = event.data.split("\n");
		// 첫 줄은 종목명, 두 번째 줄은 주가 변경
		var symbol = data[0];
		var delta = parseInt(data[1], 10);
		var cell = document.getElementById(symbol);
		var currentValue = parseInt(cell.textContent, 10);
		cell.textContent = currentValue + delta;
		
	},false );
}
</script>
</head>
<body onload="init()">
<h1>Server-Sent Events Sample</h1>
<p>
주가를 실시간으로 표시합니다.2
</p>
<table border="1">
	<tr><th>Yahoo</th><th>Google</th><th>MS</th></tr>
	<tr><td id="YAHOO">2</td><td id="GOOGLE">2</td><td id="MS">3</td></tr>
</table>
</body>
</html>